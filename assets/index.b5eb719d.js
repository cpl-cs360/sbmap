var tt=Object.defineProperty,et=Object.defineProperties;var at=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var V=(r,a,s)=>a in r?tt(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,I=(r,a)=>{for(var s in a||(a={}))rt.call(a,s)&&V(r,s,a[s]);if(J)for(var s of J(a))nt.call(a,s)&&V(r,s,a[s]);return r},C=(r,a)=>et(r,at(a));import{r as S,s as M,m as H,a as K,i as U,c as st,f as L,b as F,j as o,d as j,e as lt,g as ot,h as it,l as P,k as ct,t as dt,n as O,o as Y,p as Q,q as G,u as ht,v as pt,w as ut,x as W,y as X,z as ft,A as mt,B as gt,C as xt,D as yt,E as q,F as bt,S as vt,G as wt,R as At,H as Nt}from"./vendor.c9d07217.js";const Tt=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const d of e.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function s(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerpolicy&&(e.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?e.credentials="include":n.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(n){if(n.ep)return;n.ep=!0;const e=s(n);fetch(n.href,e)}};Tt();function $t({hexData:r,orbitData:a,dimensions:s}){const c=S.exports.useRef(null),{width:n,height:e,margin:d}=s;return S.exports.useEffect(()=>{if(r==null||a==null)return;let g=M("body").node().getBoundingClientRect().width,l=M("body").node().getBoundingClientRect().height;const f=M(c.current);f.selectAll("*").remove();const i=H(r.map(t=>t.count)),h=K().interpolator(U).domain([0,Math.log(i)]),m=f.append("g").attr("class","hexbin").attr("transform",`translate(${d.left},${d.top})`);let T=st().cells(8).scale(h).labels(function({i:t,generatedLabels:x}){return+x[t]>1e3?L(".4~s")(Math.exp(+x[t])):L(".2~s")(Math.exp(+x[t]))});m.append("g").attr("transform",`translate(${n+15},${0})`).call(T);function B(t,x){let N=x,R=N/Math.sqrt(3),D=2*R,y=e-t.y;return[{x:t.x+N,y:y+R},{x:t.x+N,y:y-R},{x:t.x,y:y-D},{x:t.x-N,y:y-R},{x:t.x-N,y:y+R},{x:t.x,y:y+D}].map(_=>`${_.x}, ${_.y}`).join(" ")}m.selectAll(".hex").data(r.filter(t=>t.count>0)).enter().append("polygon").attr("class","hex").attr("points",t=>B(t,4)).attr("fill",t=>h(Math.log(t.count))).on("mouseover",b).on("mouseout",u);let $=m.selectAll(".planet").data([{id:"earth",a:35.71437892857143,e:.01671123,w:100.46457166,b:35.70939168862441,c:.5968312005827371},{id:"jupiter",a:185.81739285714283,e:.04838624,w:34.39644051,b:185.5997449295388,c:8.9910049669602},{id:"saturn",a:340.5955692857143,e:.05386179,w:49.95424423,b:340.10116083160074,c:18.3450870277976}]);$.enter().append("ellipse").attr("class","planet").attr("cy",500).attr("fill","none").style("pointer-events","none").attr("stroke-width","2px").attr("cx",t=>500-t.c).attr("rx",t=>t.a).attr("ry",t=>t.b).attr("id",t=>t.id).attr("transform",t=>`rotate(-${t.w} 500 500)`).attr("opacity",0),$.enter().append("text").attr("class","planet").attr("x",500).attr("y",(t,x)=>500-t.a-(2-x)*5).attr("id",t=>t.id).text(t=>t.id).attr("opacity",0).attr("text-anchor","middle").style("pointer-events","none").attr("stroke-width",0);const p=F("#tooltip");function v(t){let x=m.selectAll(".orbit").data(a.filter(N=>{for(let R of t)if(N.id===R)return!0;return!1}));x.enter().append("ellipse").attr("class","orbit").attr("cy",500).attr("stroke","#EEE").attr("fill","none").style("pointer-events","none").attr("cx",N=>500-N.c).attr("rx",N=>N.a).attr("ry",N=>N.b).attr("id",N=>N.id).attr("transform",N=>`rotate(-${N.w} 500 500)`).attr("opacity",0).transition().duration(400).attr("opacity",1/t.length+(t.length>15?.4:.6)).ease(ot),x.exit().remove()}function w(t,x){let N=x.x,D=(1e3-x.y-500)/(N-500),y=20;p.classed("hidden",!1);let _=p.node().getBoundingClientRect().height;if(p.select(".value").text(L((x.count>1e4?".4":".2")+"~s")(x.count)),p.style("inset",null),N>=500)if(D>1){let k=t.y+y+_>l;p.style("left",t.x+(k?y:-y)+"px"),k?p.style("bottom",0):p.style("top",t.y+y+"px")}else if(D>0){let k=t.y-y+_>l;p.style("left",t.x+y+"px"),k?p.style("bottom",0):p.style("top",t.y-y+"px")}else if(D>=-1){let k=t.y+y-_<0;p.style("left",t.x+y+"px"),k?p.style("top",0):p.style("bottom",l-t.y-y+"px")}else{let k=t.y-y-_<0;p.style("left",t.x+(k?y:-y)+"px"),k?p.style("top",0):p.style("bottom",l-t.y+y+"px")}else if(D>1){let k=t.y-y-_<0;p.style("right",g-t.x+(k?y:-y)+"px"),k?p.style("top",0):p.style("bottom",l-t.y+y+"px")}else if(D>0){let k=t.y+y-_<0;p.style("right",g-t.x+y+"px"),k?p.style("top",0):p.style("bottom",l-t.y-y+"px")}else if(D>=-1){let k=t.y-y+_>l;p.style("right",g-t.x+y+"px"),k?p.style("bottom",0):p.style("top",t.y-y+"px")}else{let k=t.y+y+_>l;p.style("right",g-t.x+(k?y:-y)+"px"),k?p.style("bottom",0):p.style("top",t.y+y+"px")}}let A,E;function b(t){let x=M(this).data()[0].ids,N=M(this),R=F(".planet");R.raise(),N.raise(),R.attr("opacity",1),N.classed("lightStroke",D=>Math.log(D.count)/Math.log(i)<.6).transition().delay(300).duration(250).attr("points",D=>B(D,8)),x.length!==0&&(E=setTimeout(function(){let D=N.data()[0];w(t,D)},500),A=setTimeout(function(){v(x)},1e3))}function u(t){v([]),clearTimeout(A),clearTimeout(E),M(this).classed("lightStroke",!1).transition().duration(100).attr("points",x=>B(x,4)),p.classed("hidden",!0),F(".planet").attr("opacity",0)}},[r,a]),o("div",{className:"hexBin",children:j("div",{className:"hexWrapper",children:[j("div",{className:"leftWrapper",children:[o("h1",{children:"A bird's eye view"}),o("p",{children:"To the right you will see the orbital paths of roughly 1.2 million asteroids mapped onto hexagonal bins. These paths are shown from above the ecliptic plane (the plane containing Earth's orbit)."}),o("p",{children:"The vast majority of asteroids lie between Mars and Jupiter in the asteroid belt. The asteroid belt likely contains hundreds of thousands more asteroids than currently identified."}),j("div",{className:"about",children:[o("h2",{children:"About the hexmap:"}),o("hr",{}),o("h3",{children:"Hover"}),o("p",{children:"Hover to see how many orbital paths intersect the current hex."}),o("h3",{children:"Long Hover"}),o("p",{children:"Hold for 1s to reveal the orbital paths."})]})]}),j("div",{className:"svgWrapper",children:[r&&a?o("svg",{ref:c,viewBox:`0 0 ${n+d.left+d.right} ${e+d.bottom+d.top}`,id:"hexBin"}):o(lt.RingLoader,{color:"#EEE",size:75,css:{minWidth:100,minHeight:100}}),j("div",{id:"tooltip",className:"hidden",children:[o("h1",{children:"Asteroids:"}),o("p",{className:"value",children:"100"})]})]})]})})}function Et(){return j("div",{className:"intro",children:[j("div",{className:"introWrapper",children:[o("h1",{children:"The Small Body Map for the Average Person"}),j("h2",{children:[o("em",{children:"SBMAP"}),". CS360 Final Project"]}),o("h3",{children:"Colm Lang"}),o("hr",{}),j("div",{className:"bodyText",children:[o("p",{children:"Welcome to SBMAP,"}),j("p",{children:["SBMAP aims to provide a digestible, holistic representation of our solar system's many small bodies without sacrificing detail or accuracy. I hope this interactive visualization will teach you something about our solar system. It is my goal to bridge the gap between Astrophysicists and ",o("em",{children:"the rest of us"}),"."]}),j("p",{children:["To see the methodology, please reference ",o("a",{href:"/sbmap/SBMAP.pdf",target:"_blank",children:"the project report"}),"."]}),j("p",{children:[o("u",{children:"Note:"})," Best viewed on Opera or Firefox with resolution higher than 1280x800. You can find the dataset that I used ",o("a",{href:"https://ssd.jpl.nasa.gov/tools/sbdb_query.html",target:"_blank",children:"here"}),"."]})]})]}),o("div",{className:"arrow",children:o(it,{className:"arrowIcon"})}),j("div",{className:"links",children:[o("a",{href:"https://github.com/cpl-cs360/sbmap",target:"_blank",className:"button",children:"Github"}),o("a",{href:"https://github.com/cpl-cs360/sbmap#readme",target:"_blank",className:"button",children:"User Manual"}),o("a",{href:"/sbmap/SBMAP.pdf",target:"_blank",className:"button",children:"Project Report"})]})]})}function Dt({data:r,dimensions:a}){const s=S.exports.useRef(null),{width:c,height:n,margin:e}=a,d=c+e.left+e.right,g=n+e.top+e.bottom;return S.exports.useEffect(()=>{const l=M(s.current);if(l.selectAll("*").remove(),r==null)return;let f=P().domain([0,H(r)]).nice().range([0,c]),i=ct().domain(f.domain()).thresholds(dt)(r),h=G(f),m=P().domain(O(i,b=>b.length)).range([0,n/2]);const T=l.append("g").attr("class","violin").attr("transform",`translate(${e.left},${e.top})`);let B=Y().curve(Q).x(b=>f((b.x1+b.x0)/2)).y0(b=>m(b.length)).y1(b=>-m(b.length));T.append("g").attr("class","violinContainer").attr("transform",`translate(0,${n/2})`).append("path").datum(i).attr("class","band").attr("d",B);let p=T.append("g").attr("transform",`translate(0, ${n})`);p.call(h),p.append("text").attr("x",c/2).attr("y",45).text("Orbit Distance (au)");let v=T.append("g").attr("class","sun").attr("transform",`translate(0,${n/2})`);v.append("circle").attr("cx",0).attr("cy",0).attr("r",50),v.append("text").attr("x",40).attr("y",-40).text("Sun");let w=T.append("g").attr("class","earth").attr("transform",`translate(${f(1)},0)`);w.append("line").attr("x1",0).attr("y1",60).attr("x2",0).attr("y2",n-20),w.append("text").attr("text-anchor","middle").attr("x",0).attr("y",45).text("Earth");let A=T.append("g").attr("class","mars").attr("transform",`translate(${f(1.524)},0)`);A.append("line").attr("x1",0).attr("y1",60).attr("x2",0).attr("y2",n-20),A.append("text").attr("text-anchor","middle").attr("x",0).attr("y",45).text("Mars");let E=T.append("g").attr("class","jupiter").attr("transform",`translate(${f(5.2)},0)`);E.append("line").attr("x1",0).attr("y1",60).attr("x2",0).attr("y2",n-20),E.append("text").attr("text-anchor","middle").attr("x",0).attr("y",45).text("Jupiter"),w.lower(),A.lower(),E.lower()},[r]),o("div",{className:"violinPlot",children:j("div",{className:"violinWrapper",children:[j("div",{children:[o("h1",{children:"Where the asteroids lie"}),j("p",{children:["Though the majority of asteroids are in the asteroid belt (2.2au - 3.2au), you can see the clusters of some of the smaller groups. Within the main belt, one can see the Kirkwood gaps. These gaps are caused by mean-motion resonances between an asteroid and Jupiter. For example, the 3:1 Kirkwood gap is located where the ratio of an asteroid's orbital period to that of Jupiter is 3/1 (the asteroid completes 3 orbits for every 1 orbit of Jupiter). The effect of these mean-motion resonances is a change in the asteroid's orbital elements (particularly semimajor axis) sufficient to create these gaps in semimajor axis space. (",o("a",{href:"https://ssd.jpl.nasa.gov/diagrams/mb_hist.html",target:"_blank",children:"JPL."}),")"]})]}),o("svg",{ref:s,viewBox:`0 0 ${d} ${g}`,id:"violinPlot"})]})})}function St({color:r,name:a,id:s,ids:c,setIds:n}){return j("span",{className:`toggle ${r}`,onClick:()=>e(s),children:[c.includes(s)?o(ht,{className:"icon"}):o(pt,{className:"icon"}),a]});function e(d){c.includes(d)?n(c.filter(g=>g!=d)):n([...c,d])}}const Z=()=>{let r,a,s,c,n;const e=l=>{const{w:f,h:i,margin:h}=a,m=P().domain(O(r)).nice().range([0,f]),T=G(m);let B=d(g(c),m.ticks(s),r);const $=P().domain([0,H(B,b=>b[1])]).nice().range([i,0]),p=Y().curve(Q).x(b=>m(b[0])).y0($(0)).y1(b=>$(b[1])),v=b=>{b.attr("d",p)},w=b=>{b.attrTween("d",u=>{let t=E.selectAll(".line").attr("d"),x=p(u);return ft(t,x)})},A=W().duration(500).ease(X),E=l.selectAll(".densityGroup").data([null]).join("g").attr("class","densityGroup").attr("transform","translate("+h.left+","+h.top+")");E.selectAll(".line").data([null]).join("path").attr("class","line").datum(B).join(b=>b.transition(A).call(v),b=>b.call(u=>u.transition(A).call(w)),b=>b.remove()),l.selectAll(".xAxis").data([null]).join("g").attr("transform",`translate(${h.left}, ${i+h.top})`).attr("class","xAxis").transition(A).call(T),l.selectAll(".xTitle").data([null]).join("text").attr("class","axis xTitle").attr("text-anchor","middle").attr("x",h.left+f/2).attr("y",i+h.top+40).text(n)};function d(l,f,i){return f.map(h=>[h,ut(i,m=>l(h-m))])}function g(l){return f=>Math.abs(f/=l)<=1?.75*(1-f*f)/l:0}return e.data=function(l){return arguments.length?(r=l,e):r},e.dimensions=function(l){return arguments.length?(a=l,e):a},e.thresholds=function(l){return arguments.length?(s=l,e):s},e.bandwidth=function(l){return arguments.length?(c=l,e):c},e.xTitle=function(l){return arguments.length?(n=l,e):n},e};function jt({data:r,ids:a,dimensions:s,groups:c}){const n=S.exports.useRef(null),{w:e,h:d,margin:g}=s,l=e+g.left+g.right,f=d+g.top+g.bottom;let i=Z().dimensions(s).thresholds(30).bandwidth(.005).xTitle("Orbit Distance (au)");const[h,m]=S.exports.useState([]);return S.exports.useEffect(()=>{if(r==null)return;i.data(h),M(n.current).call(i)},[h]),S.exports.useEffect(()=>{if(r==null||a==null)return;const B=(a.length?r.filter($=>{for(let p of a){let w=c.find(A=>A.id==p).thresholds;if($.a>=w[0]&&$.a<=w[1])return!0}return!1}):[]).map($=>$.a);m(B)},[r,a]),o("svg",{ref:n,viewBox:`0 0 ${l} ${f}`,className:"distancePlot"})}function Bt({data:r,ids:a,dimensions:s,groups:c}){const n=S.exports.useRef(null),{w:e,h:d,margin:g}=s,l=e+g.left+g.right,f=d+g.top+g.bottom;let i=Z().dimensions(s).bandwidth(1).xTitle("Diameter (km)");const[h,m]=S.exports.useState([]);return S.exports.useEffect(()=>{if(r==null)return;i.data(h.filter(B=>B<75)).thresholds(mt(h,0,H(h))),M(n.current).call(i)},[h]),S.exports.useEffect(()=>{if(r==null||a==null)return;const B=(a.length?r.filter($=>{for(let p of a){let w=c.find(A=>A.id==p).thresholds;if($.a>=w[0]&&$.a<=w[1])return!0}return!1}):[]).map($=>$.diameter);m(B)},[r,a]),o("svg",{ref:n,viewBox:`0 0 ${l} ${f}`,className:"diameterPlot"})}const kt=()=>{let r,a,s,c,n;const e=d=>{const{w:g,h:l,margin:f}=s,i=P().domain([1.5,5.5]).range([0,g]),h=G(i),m=P().domain([0,.7]).range([l,0]),T=gt(m).ticks(8);let B=xt(),$=yt().x(x=>i(x.x)).y(x=>m(x.y)).size([g,l]).bandwidth(6).thresholds(30),p=$(r);const v=K().domain(O(p,x=>x.value)).interpolator(U),w=x=>{x.attr("d",B)},A=x=>{x.attr("fill",N=>v(N.value)).attr("stroke","#eee").attr("stroke-opacity",(N,R)=>R%5===0?.8:.1)},E=W().duration(700),b=d.selectAll(".contours").data([null]).join("g").attr("class","contours").attr("transform",`translate(${f.left},${f.top})`),u=r.map(x=>C(I({},x),{entering:!0})),t=a.map(x=>C(I({},x),{exiting:!1}));W().duration(500).tween("points",x=>N=>{const R=1-N;$.weight(D=>D.entering?N:R),p=$(u.concat(t)),v.domain(O(p,D=>D.value)).nice(),b.selectAll(".contour").data(p).join(D=>D.append("path").attr("class","contour").call(w).call(A),D=>D.call(y=>{y.call(w).call(A)}),D=>D.remove())}).ease(X),d.selectAll(".x").data([null]).join("g").attr("class","x axis").attr("transform",`translate(${f.left},${f.top+l})`).transition(E).call(h),d.selectAll(".xTitle").data([null]).join("text").attr("class","axis xTitle").attr("text-anchor","middle").attr("x",f.left+g/2).attr("y",l+f.top+40).text(c),d.selectAll(".y").data([null]).join("g").attr("class","y axis").attr("transform",`translate(${f.left},${f.top})`).transition(E).call(T),d.selectAll(".yTitle").data([null]).join("text").attr("class","axis yTitle").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",0-f.top-l/2).attr("y",24).text(n)};return e.data=function(d){return arguments.length?(r=d,e):r},e.prevData=function(d){return arguments.length?(a=d,e):a},e.dimensions=function(d){return arguments.length?(s=d,e):s},e.xTitle=function(d){return arguments.length?(c=d,e):c},e.yTitle=function(d){return arguments.length?(n=d,e):n},e};function Rt({data:r,ids:a,dimensions:s,groups:c}){const n=S.exports.useRef(null),{w:e,h:d,margin:g}=s,l=e+g.left+g.right,f=d+g.top+g.bottom;let i=kt().dimensions(s).xTitle("Orbit Distance (au)").yTitle("Eccentricty");const[h,m]=S.exports.useState([]),[T,B]=S.exports.useState([]);return S.exports.useEffect(()=>{i.data(h).prevData(T),M(n.current).call(i)},[h]),S.exports.useEffect(()=>{if(r==null||a==null)return;const p=(a.length?r.filter(v=>{for(let w of a){let E=c.find(b=>b.id==w).thresholds;if(v.a>=E[0]&&v.a<=E[1])return!0}return!1}):[]).map(v=>({x:v.a,y:v.e}));B(h),m(p)},[r,a]),o("svg",{ref:n,viewBox:`0 0 ${l} ${f}`,className:"ePlot"})}function _t({data:r,dimensions:a}){let s=[{name:"Hungaria Group",color:"pink",thresholds:[1.7,2]},{name:"Main Belt",color:"purple",thresholds:[2.05,3.3]},{name:"Hilda Group",color:"yellow",thresholds:[3.7,4.2]},{name:"Trojan Group",color:"orange",thresholds:[5.05,5.4]}].map(e=>C(I({},e),{id:e.name.toLowerCase().slice(0,4)}));const[c,n]=S.exports.useState(s.map(e=>e.id));return o("div",{className:"dashboard",children:j("div",{className:"dashboardWrapper",children:[j("div",{className:"topbar",children:[o("h1",{children:"The Asteroid Dashboard"}),o("div",{className:"toggles",children:s.map(e=>o(St,{color:e.color,name:e.name,id:e.id,ids:c,setIds:n},e.id))})]}),o("div",{className:"top",children:o(jt,{data:r,ids:c,dimensions:a.a,groups:s})}),j("div",{className:"bottom",children:[o("div",{className:"left",children:o(Bt,{data:r,ids:c,dimensions:a.d,groups:s})}),o("div",{className:"right",children:o(Rt,{data:r,ids:c,dimensions:a.e,groups:s})})]})]})})}async function Mt(r,a,s,c,n,e){let d=await q(r,i=>(i[a]=+i[a],i[s]=+i[s],i[c]=+i[c],i)),g=-1,l=[];return z(a,d,n).forEach(function(i){z(s,i.values,n).forEach(function(m){z(c,m.values,n).forEach(function(B){let $=bt(B.values);for(let p of $)++g%e===0&&l.push(p)})})}),l}function z(r,a,s){a.sort((l,f)=>l[r]<f[r]?-1:1);let[c,n]=O(a.map(l=>l[r])),e=(n-c)/s,d=[...Array(s)].map((l,f)=>({min:e*f+c,values:[]})),g=0;return a.forEach(l=>{g<s-1&&l[r]>=d[g+1].min&&g++,d[g].values.push(l)}),d}const Pt=()=>{let r,a;const s=c=>{const{w:n,h:e,margin:d}=a,g={id:"1P/Halley",a:17.8341442925537,e:.967142908462304,w:111.3324851045177,I:162.262690579161},l=[{id:"earth",a:1.00000261,e:.01671123,I:360-1531e-8,w:102.93768193},{id:"mars",a:1.52371034,e:.0933941,I:1.84969142,w:360-23.94362959},{id:"jupiter",a:5.202887,e:.04838624,I:1.30439695,w:14.72847983},{id:"saturn",a:9.53667594,e:.05386179,I:2.48599187,w:92.59887831},{id:"uranus",a:19.18916464,e:.04725744,I:.77263783,w:170.9542763},{id:"neptune",a:30.06992276,e:.00859048,I:1.77004347,w:44.96476227}],f=({a:v,e:w})=>{let A=v*Math.sqrt(1-w*w);return Math.sqrt(v*v-A*A)},i=({a:v,e:w})=>v*Math.sqrt(1-w*w),h=P().range([0,n<e?n/2:e/2]),m=W().duration(500),T=W().duration(300),p={above:()=>{h.domain([0,H(l,n<e?u=>u.a:i)]),c.selectAll(".sun").data([null]).join("circle").attr("class","sun").attr("cx",n/2).attr("cy",e/2).transition(m).attr("r",3);const v=u=>{u.attr("cx",t=>h(-1*f(t))).attr("cy",h(0))},w=u=>{u.attr("rx",t=>h(t.a)).attr("ry",t=>h(i(t)))},A=u=>{u.attr("rx",0).attr("ry",0)},E=u=>{u.attr("transform",t=>`rotate(-${t.w} 0 0)`)};let b=c.selectAll("g").data([null]).join("g").attr("transform",`translate(${n/2},${e/2})`);b.selectAll(".orbit").data(l).join(u=>u.append("ellipse").attr("class",t=>"orbit "+t.id).attr("stroke","#eee").attr("stroke-width",2).attr("fill","none").call(v).call(A).call(E).transition(m).call(w),u=>u.call(t=>t.transition(m).call(v).call(w).transition(T).call(E)),u=>u.transition(m).call(A).remove()),b.selectAll(".comet").data([g]).join(u=>u.append("ellipse").attr("class","comet").attr("stroke","green").attr("stroke-width",2).attr("fill","none").call(v).call(A).call(E).transition(m).call(w),u=>u.call(t=>t.transition(m).call(v).call(w).transition(T).call(E)),u=>u.transition(m).call(A).remove()).raise()},side:()=>{h.domain([0,H(l,u=>u.a)]);const v=u=>{u.attr("cx",t=>h(-1*f(t))).attr("cy",h(0))},w=u=>{u.attr("rx",t=>h(t.a)).attr("ry",.001)},A=u=>{u.attr("transform",t=>`rotate(-${t.I} 0 0)`)},E=u=>{u.attr("rx",0).attr("ry",0)};let b=c.selectAll("g").data([null]).join("g");b.selectAll(".orbit").data(l).join(u=>u.append("ellipse").attr("class",t=>"orbit "+t.id).call(v).call(E).transition(m).call(w),u=>u.call(t=>t.transition(m).call(A).transition(T).call(v).call(w)),u=>u.transition(m).call(E).remove()).raise(),b.selectAll(".comet").data([g]).join(u=>u.append("ellipse").attr("class",t=>"orbit "+t.id).call(v).call(A).call(E).transition(m).call(w),u=>u.call(t=>t.transition(m).call(A).transition(T).call(v).call(w)),u=>u.transition(m).call(E).remove())}};p[r]&&p[r]()};return s.view=function(c){return arguments.length?(r=c,s):r},s.dimensions=function(c){return arguments.length?(a=c,s):a},s};function Ht({dimensions:r}){const{w:a,h:s,margin:c}=r,n=[{view:"above"},{view:"side"}],e=["Unlinke the planets in our solar system, Halley's Comet (1P/Halley) has a highly eccentric orbit. The nearest point of Helleys orbit comes between the earth and the sun while its greatest distance from the sun reaches beyond Neptune's orbit!","While most of the planets orbit very close to the ecliptic plane, Halley's orbit lies on a plane that is tilted roughly 18 degrees."],[d,g]=S.exports.useState(0);function l({data:h}){g(h)}const f=S.exports.useRef(null);let i=Pt().dimensions(r);return S.exports.useEffect(()=>{i.view(n[d].view),console.log(i.view()),M(f.current).call(i)},[d]),j("div",{className:"graphicContainer",children:[o("div",{className:"scrollWrapper",children:o("div",{className:"scroller",children:o(vt,{onStepEnter:l,offset:.5,children:e.map((h,m)=>o(wt,{data:m,children:o("div",{className:"step "+(d===m&&"active"),children:o("p",{children:e[m]})})},m))})})}),o("div",{className:"graphic",children:o("svg",{ref:f,viewBox:`0 0 ${a+c.left+c.right} ${s+c.top+c.bottom}`,className:"figure"})}),o("h1",{className:"title",children:"Halley's Comet (1P/Halley)"})]})}function It(){const r=(g,l)=>C(I({},g),{[l.type]:l.payload}),[a,s]=S.exports.useReducer(r,{violin:null,hexbin:null,orbit:null,dashboard:null}),c={width:700,height:400,margin:{top:10,right:10,bottom:60,left:10}},n={width:1e3,height:1e3,margin:{top:10,right:90,bottom:10,left:10}},e={a:{w:1140,h:390,margin:{top:10,right:10,bottom:50,left:10}},d:{w:550,h:390,margin:{top:10,right:10,bottom:50,left:10}},e:{w:500,h:390,margin:{top:10,right:10,bottom:50,left:60}}},d={w:600,h:400,margin:{top:10,right:10,bottom:10,left:10}};return S.exports.useEffect(()=>{q("https://gist.githubusercontent.com/colmpat/c904b44e2b9243c8c77006175a17b70d/raw/7769640a26f587eba49bd08cfd3acb356aac8b98/hex_bins_125_max_20.csv",i=>{let h=i.ids;h=h.slice(1,h.length-1);let m=h.length===0?[]:[...h.split(",").map(T=>parseFloat(T))];return{x:+i.x,y:+i.y,count:+i.count,ids:m}}).then(i=>{s({type:"hexbin",payload:i})}),q("https://gist.githubusercontent.com/colmpat/772ef248351979b9e25253a19ff692a5/raw/99f61ed7adf490a79d62d8fc36aa6f33ed4eb828/orbits_125_sampled.csv",i=>({id:+i.id,a:+i.a,b:+i.b,c:+i.c,e:+i.e,w:+i.w})).then(i=>{s({type:"orbit",payload:i})}),Mt("https://gist.githubusercontent.com/colmpat/d2c7e60946a1ec2931c8e8fcd9a30277/raw/d052fd8bb80d36218cbdfc37b03d309ab6bb476a/dashboard_data.csv","a","e","diameter",100,30).then(i=>{s({type:"dashboard",payload:i}),s({type:"violin",payload:i.map(h=>h.a)})})},[]),o("div",{className:"app",children:j("div",{className:"sections",children:[o(Et,{}),o(Dt,{data:a.violin,dimensions:c}),o($t,{hexData:a.hexbin,orbitData:a.orbit,dimensions:n}),o(_t,{data:a.dashboard,dimensions:e}),o(Ht,{dimensions:d})]})})}At.render(o(Nt.StrictMode,{children:o(It,{})}),document.getElementById("root"));
